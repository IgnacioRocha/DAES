@model IEnumerable<DAES.Model.SistemaIntegrado.Disolucion>
@using GridMvc.Html

<div class="panel panel-default">
    <div class="panel-heading">Disolución</div>
    <div class="panel-body">
        <table class="table table-striped">
            @if (Model.Count() != 0)
            {
                if (Model.FirstOrDefault().TipoOrganizacionId == (int)DAES.Infrastructure.Enum.TipoOrganizacion.Cooperativa)
                {
                    if (Model.FirstOrDefault().Anterior == true)
                    {
                        <thead>
                            <tr>
                                <th>
                                    @Html.DisplayNameFor(model => model.FirstOrDefault().TipoNorma.Nombre)
                                </th>
                                <th>@Html.DisplayNameFor(model => model.FirstOrDefault().NumeroNorma)</th>
                                <th>@Html.DisplayNameFor(model => model.FirstOrDefault().FechaNorma)</th>
                                <th>@Html.DisplayNameFor(model => model.FirstOrDefault().FechaPubliccionDiarioOficial)</th>
                                <th>@Html.DisplayNameFor(model => model.FirstOrDefault().Autorizacion)</th>
                                <th>@Html.DisplayNameFor(model => model.FirstOrDefault().FechaJuntaSocios)</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                <tr>
                                    <td>
                                        @Html.DisplayFor(model => model.FirstOrDefault().TipoNorma.Nombre)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(model => item.NumeroNorma)
                                    </td>
                                    <td>
                                        @string.Format("{0:dd-MM-yyyy}", item.FechaNorma)
                                    </td>
                                    <td>
                                        @string.Format("{0:dd-MM-yyyy}", item.FechaPubliccionDiarioOficial)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(model => item.Autorizacion)
                                    </td>
                                    <td>
                                        @string.Format("{0:dd-MM-yyyy}", item.FechaJuntaSocios)
                                    </td>
                                </tr>
                                if (item.ComisionAnterior)
                                {
                                    <table class="table table-striped dataTable">
                                        <h4>Comisión Liquidadora</h4>
                                        <thead>
                                            <tr>
                                                <th>
                                                    @Html.DisplayNameFor(m => m.ComisionLiquidadoras.FirstOrDefault().EsMiembro)
                                                </th>
                                                <th>
                                                    @Html.DisplayNameFor(m => m.ComisionLiquidadoras.FirstOrDefault().NombreCompleto)
                                                </th>
                                                <th>
                                                    @Html.DisplayNameFor(m => m.ComisionLiquidadoras.FirstOrDefault().Rut)
                                                </th>
                                                <th>
                                                    @Html.DisplayNameFor(m => m.ComisionLiquidadoras.FirstOrDefault().Cargo.Nombre)
                                                </th>
                                                <th>
                                                    @Html.DisplayNameFor(m => m.ComisionLiquidadoras.FirstOrDefault().Genero.Nombre)
                                                </th>
                                                <th>
                                                    @Html.DisplayNameFor(m => m.ComisionLiquidadoras.FirstOrDefault().FechaInicio)
                                                </th>
                                                <th>
                                                    @Html.DisplayNameFor(m => m.ComisionLiquidadoras.FirstOrDefault().FechaTermino)
                                                </th>
                                            </tr>
                                        </thead>
                                        @foreach (var aux in item.ComisionLiquidadoras)
                                        {
                                            if (aux.EsMiembro)
                                            {
                                                <tbody>
                                                    <tr>
                                                        <th>
                                                            Si
                                                        </th>
                                                        <th>
                                                            @Html.DisplayFor(model => aux.NombreCompleto)
                                                        </th>
                                                        <th>
                                                            @Html.DisplayFor(model => aux.Rut)
                                                        </th>
                                                        <th>
                                                            @Html.DisplayFor(model => aux.Cargo.Nombre)
                                                        </th>
                                                        <th>
                                                            @Html.DisplayFor(model => aux.Genero.Nombre)
                                                        </th>
                                                        <th>
                                                            @string.Format("{0:dd-MM-yyyy}", aux.FechaInicio)
                                                            @*@Html.DisplayFor(model => item.ComisionLiquidadoras.FirstOrDefault().FechaInicio)*@
                                                        </th>
                                                        <th>
                                                            @string.Format("{0:dd-MM-yyyy}", aux.FechaTermino)
                                                            @*@Html.DisplayFor(model => item.ComisionLiquidadoras.FirstOrDefault().FechaTermino)*@
                                                        </th>
                                                    </tr>
                                                </tbody>
                                            }
                                        }
                                    </table>
                                }
                            }
                        </tbody>
                    }
                    else
                    {
                        <thead>
                            <tr>
                                <th>@Html.DisplayNameFor(model => model.FirstOrDefault().FechaJuntaSocios)</th>
                                <th>@Html.DisplayNameFor(model => model.FirstOrDefault().FechaEscrituraPublica)</th>
                                <th>@Html.DisplayNameFor(model => model.FirstOrDefault().MinistroDeFe)</th>
                                <th>@Html.DisplayNameFor(model => model.FirstOrDefault().FechaPubliccionDiarioOficial)</th>
                                <th>@Html.DisplayNameFor(model => model.FirstOrDefault().NumeroFojas)</th>
                                <th>@Html.DisplayNameFor(model => model.FirstOrDefault().AñoInscripcion)</th>
                                <th>@Html.DisplayNameFor(model => model.FirstOrDefault().DatosCBR)</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                <tr>
                                    <td>@string.Format("{0:dd-MM-yyyy}", item.FechaJuntaSocios)</td>
                                    <td>
                                        @string.Format("{0:dd-MM-yyyy}", item.FechaEscrituraPublica)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(model => item.MinistroDeFe)
                                    </td>
                                    <td>
                                        @string.Format("{0:dd-MM-yyyy}", item.FechaPubliccionDiarioOficial)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(model => item.NumeroFojas)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(model => item.AñoInscripcion)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(model => item.DatosCBR)
                                    </td>
                                </tr>

                                if (item.ComisionPosterior)
                                {
                                    <table class="table table-striped dataTable">
                                        <h4>Comisión Liquidadora</h4>
                                        <thead>
                                            <tr>
                                                <th>
                                                    @Html.DisplayNameFor(m => m.ComisionLiquidadoras.FirstOrDefault().EsMiembro)
                                                </th>
                                                <th>
                                                    @Html.DisplayNameFor(m => m.ComisionLiquidadoras.FirstOrDefault().NombreCompleto)
                                                </th>
                                                <th>
                                                    @Html.DisplayNameFor(m => m.ComisionLiquidadoras.FirstOrDefault().Rut)
                                                </th>
                                                <th>
                                                    @Html.DisplayNameFor(m => m.ComisionLiquidadoras.FirstOrDefault().Cargo.Nombre)
                                                </th>
                                                <th>
                                                    @Html.DisplayNameFor(m => m.ComisionLiquidadoras.FirstOrDefault().Genero.Nombre)
                                                </th>
                                                <th>
                                                    @Html.DisplayNameFor(m => m.ComisionLiquidadoras.FirstOrDefault().FechaInicio)
                                                </th>
                                                <th>
                                                    @Html.DisplayNameFor(m => m.ComisionLiquidadoras.FirstOrDefault().FechaTermino)
                                                </th>
                                            </tr>
                                        </thead>
                                        @foreach (var aux in item.ComisionLiquidadoras)
                                        {
                                            if (aux.EsMiembro)
                                            {
                                                <tbody>
                                                    <tr>
                                                        <th>
                                                            Si
                                                        </th>
                                                        <th>
                                                            @Html.DisplayFor(model => aux.NombreCompleto)
                                                        </th>
                                                        <th>
                                                            @Html.DisplayFor(model => aux.Rut)
                                                        </th>
                                                        <th>
                                                            @Html.DisplayFor(model => aux.Cargo.Nombre)
                                                        </th>
                                                        <th>
                                                            @Html.DisplayFor(model => aux.Genero.Nombre)
                                                        </th>
                                                        <th>
                                                            @string.Format("{0:dd-MM-yyyy}", aux.FechaInicio)
                                                            @*@Html.DisplayFor(model => item.ComisionLiquidadoras.FirstOrDefault().FechaInicio)*@
                                                        </th>
                                                        <th>
                                                            @string.Format("{0:dd-MM-yyyy}", aux.FechaTermino)
                                                            @*@Html.DisplayFor(model => item.ComisionLiquidadoras.FirstOrDefault().FechaTermino)*@
                                                        </th>
                                                    </tr>
                                                </tbody>
                                            }
                                        }
                                    </table>
                                }
                            }
                        </tbody>
                    }
                }
                else
                {                    
                    <thead>
                        <tr>
                            <th>
                                @Html.DisplayNameFor(model => model.FirstOrDefault().NumeroOficio)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.FirstOrDefault().FechaOficio)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.FirstOrDefault().FechaAsambleaSocios)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.FirstOrDefault().FechaEscrituraPublica)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.FirstOrDefault().FechaPubliccionDiarioOficial)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.FirstOrDefault().NombreNotaria)
                            </th>                                
                            <th>
                                @Html.DisplayNameFor(model => model.FirstOrDefault().DatosNotario)
                            </th>                               
                        </tr>
                    </thead>
                    foreach (var item in Model)
                    {
                        <tbody>
                            <tr>
                                <td>
                                    @Html.DisplayFor(model => item.NumeroOficio)
                                </td>
                                <td>
                                    @string.Format("{0:dd-MM-yyyy}", item.FechaOficio)
                                </td>
                                <td>
                                    @string.Format("{0:dd-MM-yyyy}", item.FechaAsambleaSocios)
                                </td>
                                <td>
                                    @string.Format("{0:dd-MM-yyyy}", item.FechaEscrituraPublica)
                                </td>
                                <td>
                                    @string.Format("{0:dd-MM-yyyy}", item.FechaPubliccionDiarioOficial)
                                </td>
                                <td>
                                    @Html.DisplayFor(model => item.NombreNotaria)
                                </td>
                                <td>
                                    @Html.DisplayFor(model => item.DatosNotario)
                                </td>
                            </tr>                        
                        </tbody>
                    }
                }
            }
        </table>
    </div>
</div>
